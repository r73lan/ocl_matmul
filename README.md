# Умножение матриц с использованием OpenCL и OpenMP

Эта программа предназначена для умножения матриц, используя библиотеки **OpenMP** и **OpenCL** для ускорения вычислений.

 Блок с **OpenCL** состоит из несколько методов реализации, включая работу с глобальной памятью, локальной памятью и векторизации локальной памяти.

## Запуск программы

Программа запускается с использованием следующих параметров:

```bash
main.cpp --input <input_file> --output <output_file> --realization <mode> [--device-type <device>] [--device-index <index>]
```

### Описание параметров

- **`--input <input_file>` (обязательно)**  
  Путь к входному файлу, содержащему размеры и значения матриц.  

- **`--output <output_file>` (обязательно)**  
  Путь для сохранения результата умножения матриц.  

- **`--realization <mode>` (обязательно)**  
  Указывает метод реализации умножения:  
  - `0` — Вычисления на CPU с использованием OpenMP.  
  - `1` — Вычисления на GPU с использованием глобальной памяти.  
  - `2` — Вычисления на GPU с использованием локальной памяти.  
  - `3` — Вычисления на GPU с использованием локальной памяти и векторизацией.  

- **`--device-type <device>` (опционально)**  
  Указывает тип OpenCL-устройства. Возможные значения:
  - `dgpu` — Дискретный GPU.  
  - `igpu` — Интегрированный GPU.  
  - `gpu` — Любой доступный GPU.  
  - `cpu` — Процессор.  
  - `all` — Все доступные устройства.  

  *По умолчанию используется первый доступный GPU.*

- **`--device-index <index>` (опционально)**  
  Индекс устройства среди выбранного типа. Если не указано, используется устройство с индексом `0`.

---

## Пример использования

### Пример запуска на CPU с OpenMP:
```bash
main.cpp --input matrix_input.txt --output matrix_output.txt --realization 0
```

### Пример запуска на дискретном GPU с глобальной памятью:
```bash
main.cpp --input matrix_input.txt --output matrix_output.txt --realization 1 --device-type dgpu
```

### Пример запуска с локальной памятью и векторизацией на интегрированном GPU:
```bash
main.cpp --input matrix_input.txt --output matrix_output.txt --realization 3 --device-type igpu
```

---

## Входные данные

Примеры тестовых данных (матрицы) расположены в директории **test_data**

---

## Выходные данные

Выходной файл output_file. В консоль выводится время работы программы

---

## Методы реализации

1. **OpenMP на CPU**  
   Использует многопоточность для повышения производительности.

2. **Глобальная память на GPU**  
   Простая реализация, которая выполняет вычисления, используя глобальную память девайса.  

3. **Локальная память на GPU**  
   Оптимизация с использованием локальной памяти для уменьшения задержек при обращении к данным.  

4. **Локальная память и векторизация на GPU**  
   Использует локальную память девайса и векторные вычисления для максимальной производительности.

---